<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>City-wise Crime Heatmap</title>
  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 18px;
      background: #fafafa;
      color: #222;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 8px;
    }
    #heatmap {
      width: 100%;
      max-width: 900px;
      height: 600px;
      margin: 0 auto;
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(50,50,93,0.08);
      background: white;
      padding: 8px;
    }
    .note {
      max-width: 900px;
      margin: 12px auto;
      font-size: 13px;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>City-wise Crime Heatmap (Plotly â€” YlOrRd)</h1>

  <div id="heatmap"></div>

  <div class="note">
    Tip: Replace `cities`, `crimeTypes` or `zData` arrays below with your own data (zData must be an array-of-arrays shaped `[cities.length][crimeTypes.length]`).
  </div>

  <script>
    // --- SAMPLE DATA (replace with your own) ---
    const cities = ["Mumbai", "Delhi", "Bengaluru", "Chennai", "Kolkata"];
    const crimeTypes = ["Theft", "Assault", "Robbery", "Fraud", "Vandalism"];

    // zData: rows correspond to cities, columns correspond to crimeTypes
    const zData = [
      [120, 40, 20, 15, 10],   // Mumbai
      [90,  60, 30, 25, 12],   // Delhi
      [45,  20, 12, 10,  6],   // Bengaluru
      [60,  18, 10,  8,  5],   // Chennai
      [70,  25, 15, 20,  9]    // Kolkata
    ];
    // ------------------------------------------

    // Create text matrix for annotations (integers)
    const textData = zData.map(row => row.map(v => String(v)));

    const data = [{
      z: zData,
      x: crimeTypes,
      y: cities,
      type: 'heatmap',
      colorscale: 'YlOrRd', // seaborn YlOrRd-like
      reversescale: false,
      showscale: true,
      hovertemplate: '<b>%{y}</b><br>%{x}: %{z}<extra></extra>',
      zsmooth: false
    }];

    // Add annotations so each cell shows its value (like sns.heatmap(annot=True))
    const annotations = [];
    for (let i = 0; i < cities.length; i++) {
      for (let j = 0; j < crimeTypes.length; j++) {
        const currentValue = zData[i][j];
        annotations.push({
          x: crimeTypes[j],
          y: cities[i],
          text: String(currentValue),
          showarrow: false,
          font: {
            color: currentValue > (Math.max(...zData.flat()) * 0.45) ? 'white' : 'black',
            size: 12
          },
          xanchor: 'center',
          yanchor: 'middle'
        });
      }
    }

    const layout = {
      margin: { t: 60, r: 30, b: 60, l: 120 },
      title: {
        text: 'City-wise Crime Heatmap',
        x: 0.01,
        xanchor: 'left',
        font: { size: 18 }
      },
      xaxis: {
        title: 'Crime Type',
        ticks: '',
        side: 'top'
      },
      yaxis: {
        title: '',
        autorange: 'reversed' // keep first city at top to match seaborn default
      },
      annotations: annotations,
      paper_bgcolor: 'white',
      plot_bgcolor: 'white',
      // responsive sizing
      autosize: true,
      width: Math.min(window.innerWidth - 40, 900)
    };

    Plotly.newPlot('heatmap', data, layout, {responsive: true});
  </script>
</body>
</html>
